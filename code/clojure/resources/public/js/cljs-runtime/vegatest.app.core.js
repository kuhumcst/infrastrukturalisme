goog.provide('vegatest.app.core');
vegatest.app.core.json = "{\n  \"$schema\": \"https://vega.github.io/schema/vega/v5.json\",\n  \"description\": \"A timeline for Hjelmslev's activities.\",\n  \"width\": 800,\n  \"height\": 200,\n  \"padding\": 10,\n  \"autosize\": \"pad\",\n  \"data\": [\n    {\n      \"name\": \"hjelmslev\",\n      \"url\": \"https://raw.githubusercontent.com/SofieVonge/infrastrukturalisme/master/data/timeline/hjelmslev.json\",\n      \"format\": {\n        \"type\": \"json\",\n        \"parse\": {\n          \"Startdato\": \"date:'%d-%m-%Y'\",\n          \"Slutdato\": \"date:'%d-%m-%Y'\"\n        }\n      },\n      \"transform\": [\n        {\n          \"type\": \"formula\",\n          \"expr\": \"datum.Kategori === 'Rejse' ? 0 : 1\",\n          \"as\": \"sorting\"\n        }\n      ]\n    },\n    {\n      \"name\": \"initValues\",\n      \"format\": {\n        \"type\": \"json\",\n        \"parse\": {\n          \"initRange\": \"date\"\n        }\n      },\n      \"values\": [\n        {\n          \"initRange\": -1262304000000\n        },\n        {\n          \"initRange\": -1136073600000\n        }\n      ],\n      \"transform\": [\n        {\n          \"type\": \"extent\",\n          \"field\": \"initRange\",\n          \"signal\": \"xext\"\n        }\n      ]\n    },\n    {\n      \"name\": \"selected\",\n      \"on\": [\n        {\n          \"trigger\": \"clear\",\n          \"remove\": true\n        },\n        {\n          \"trigger\": \"!shift\",\n          \"remove\": true\n        },\n        {\n          \"trigger\": \"!shift && clicked\",\n          \"insert\": \"clicked\"\n        },\n        {\n          \"trigger\": \"shift && clicked\",\n          \"toggle\": \"clicked\"\n        }\n      ]\n    }\n  ],\n  \"signals\": [\n    {\n      \"name\": \"path\",\n      \"value\": \"M0 -50 H 800 V 200 H0\"\n    },\n    {\n      \"name\": \"clear\",\n      \"value\": true,\n      \"on\": [\n        {\n          \"events\": \"dblclick[!event.item]\",\n          \"update\": \"true\",\n          \"force\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"shift\",\n      \"value\": false,\n      \"on\": [\n        {\n          \"events\": \"@legendSymbol:click, @legendLabel:click\",\n          \"update\": \"event.shiftKey\",\n          \"force\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"clicked\",\n      \"value\": null,\n      \"on\": [\n        {\n          \"events\": \"@legendSymbol:click, @legendLabel:click\",\n          \"update\": \"{value: datum.value}\",\n          \"force\": true\n        }\n      ]\n    },\n    {\n      \"name\": \"down\",\n      \"value\": null,\n      \"on\": [\n        {\n          \"events\": \"mousedown\",\n          \"update\": \"xy()\"\n        }\n      ]\n    },\n    {\n      \"name\": \"xcur\",\n      \"value\": null,\n      \"on\": [\n        {\n          \"events\": \"mousedown\",\n          \"update\": \"slice(xdom)\"\n        }\n      ]\n    },\n    {\n      \"name\": \"delta\",\n      \"value\": [\n        0,\n        0\n      ],\n      \"on\": [\n        {\n          \"events\": [\n            {\n              \"source\": \"window\",\n              \"type\": \"mousemove\",\n              \"filter\": \"!event.shiftKey\",\n              \"consume\": true,\n              \"between\": [\n                {\n                  \"type\": \"mousedown\",\n                  \"filter\": \"!event.shiftKey\"\n                },\n                {\n                  \"source\": \"window\",\n                  \"type\": \"mouseup\"\n                }\n              ]\n            }\n          ],\n          \"update\": \"down ? [down[0]-x(), y()-down[1]] : [0,0]\"\n        }\n      ]\n    },\n    {\n      \"name\": \"xdom\",\n      \"update\": \"slice(xext)\",\n      \"on\": [\n        {\n          \"events\": \"dblclick\",\n          \"update\": \"slice(xext)\"\n        },\n        {\n          \"events\": {\n            \"signal\": \"delta\"\n          },\n          \"update\": \"[xcur[0] + span(xcur) * delta[0] / width, xcur[1] + span(xcur) * delta[0] / width]\"\n        }\n      ]\n    }\n  ],\n  \"scales\": [\n    {\n      \"name\": \"yscale\",\n      \"type\": \"band\",\n      \"range\": \"height\",\n      \"domain\": {\n        \"data\": \"hjelmslev\",\n        \"field\": \"Kategori\",\n        \"sort\": {\n          \"op\": \"min\",\n          \"field\": \"sorting\"\n        }\n      }\n    },\n    {\n      \"name\": \"xscale\",\n      \"type\": \"time\",\n      \"padding\": 0.5,\n      \"domain\": {\n        \"signal\": \"xdom\"\n      },\n      \"range\": \"width\"\n    },\n    {\n      \"name\": \"color\",\n      \"type\": \"ordinal\",\n      \"range\": {\n        \"scheme\": \"category20\"\n      },\n      \"domain\": {\n        \"data\": \"hjelmslev\",\n        \"field\": \"Kategori\"\n      }\n    }\n  ],\n  \"axes\": [\n    {\n      \"orient\": \"bottom\",\n      \"scale\": \"xscale\",\n      \"format\": \"%m.%Y\",\n      \"labelAngle\": -40,\n      \"labelPadding\": 9\n    },\n    {\n      \"orient\": \"left\",\n      \"scale\": \"yscale\",\n      \"grid\": true,\n      \"encode\": {\n        \"labels\": {\n          \"enter\": {\n            \"fill\": {\n              \"signal\": \"scale('color', datum.value)\"\n            }\n          }\n        }\n      }\n    }\n  ],\n  \"legends\": [\n    {\n      \"stroke\": \"color\",\n      \"symbolType\": \"stroke\",\n      \"direction\": \"horizontal\",\n      \"orient\": \"top\",\n      \"offset\": 80,\n      \"encode\": {\n        \"symbols\": {\n          \"name\": \"legendSymbol\",\n          \"interactive\": true,\n          \"update\": {\n            \"opacity\": [\n              {\n                \"test\": \"!length(data('selected')) || indata('selected', 'value', datum.value)\",\n                \"value\": 1\n              },\n              {\n                \"value\": 0.25\n              }\n            ]\n          }\n        },\n        \"labels\": {\n          \"name\": \"legendLabel\",\n          \"interactive\": true,\n          \"update\": {\n            \"opacity\": [\n              {\n                \"test\": \"!length(data('selected')) || indata('selected', 'value', datum.value)\",\n                \"value\": 1\n              },\n              {\n                \"value\": 0.25\n              }\n            ]\n          }\n        }\n      }\n    }\n  ],\n  \"marks\": [\n    {\n      \"type\": \"path\",\n      \"encode\": {\n        \"update\": {\n          \"fill\": {\n            \"value\": \"purple\"\n          },\n          \"path\": {\n            \"signal\": \"null\"\n          }\n        }\n      }\n    },\n    {\n      \"type\": \"text\",\n      \"from\": {\n        \"data\": \"hjelmslev\"\n      },\n      \"zindex\": 99,\n      \"clip\": {\n        \"path\": \"M0 -50 H 800 V 200 H0\"\n      },\n      \"encode\": {\n        \"update\": {\n          \"x\": {\n            \"scale\": \"xscale\",\n            \"field\": \"Startdato\",\n            \"offset\": 5.5\n          },\n          \"y\": {\n            \"field\": \"Kategori\",\n            \"scale\": \"yscale\",\n            \"offset\": 3\n          },\n          \"angle\": {\n            \"value\": -60\n          },\n          \"text\": {\n            \"field\": \"Event\"\n          },\n          \"limit\": {\n            \"value\": 50\n          },\n          \"tooltip\": [\n            {\n              \"test\": \"(!length(data('selected')) || indata('selected', 'value', datum.Kategori))\",\n              \"signal\": \"datum.Tooltip\"\n            }\n          ],\n          \"opacity\": [\n            {\n              \"test\": \"(!length(data('selected')) || indata('selected', 'value', datum.Kategori))\",\n              \"value\": 1\n            },\n            {\n              \"value\": 0\n            }\n          ]\n        }\n      }\n    },\n    {\n      \"type\": \"symbol\",\n      \"from\": {\n        \"data\": \"hjelmslev\"\n      },\n      \"clip\": true,\n      \"zindex\": 80,\n      \"encode\": {\n        \"update\": {\n          \"x\": {\n            \"scale\": \"xscale\",\n            \"field\": \"Startdato\"\n          },\n          \"y\": {\n            \"scale\": \"yscale\",\n            \"field\": \"Kategori\",\n            \"offset\": 6\n          },\n          \"fill\": {\n            \"scale\": \"color\",\n            \"field\": \"Kategori\"\n          },\n          \"tooltip\": [\n            {\n              \"test\": \"(!length(data('selected')) || indata('selected', 'value', datum.Kategori))\",\n              \"signal\": \"'Land: ' + datum.Land\"\n            }\n          ],\n          \"opacity\": [\n            {\n              \"test\": \"(!length(data('selected')) || indata('selected', 'value', datum.Kategori))\",\n              \"value\": 1\n            },\n            {\n              \"value\": 0\n            }\n          ]\n        }\n      }\n    },\n    {\n      \"type\": \"rect\",\n      \"from\": {\n        \"data\": \"hjelmslev\"\n      },\n      \"zindex\": 1,\n      \"clip\": true,\n      \"encode\": {\n        \"enter\": {\n          \"y\": {\n            \"scale\": \"yscale\",\n            \"field\": \"Kategori\",\n            \"offset\": 4\n          },\n          \"height\": {\n            \"value\": 4\n          },\n          \"fill\": {\n            \"scale\": \"color\",\n            \"field\": \"Kategori\"\n          }\n        },\n        \"update\": {\n          \"x\": {\n            \"scale\": \"xscale\",\n            \"field\": \"Startdato\"\n          },\n          \"x2\": {\n            \"scale\": \"xscale\",\n            \"field\": \"Slutdato\"\n          },\n          \"tooltip\": [\n            {\n              \"test\": \"(!length(data('selected')) || indata('selected', 'value', datum.Kategori))\",\n              \"signal\": \"'Land: ' + datum.Land\"\n            }\n          ],\n          \"opacity\": [\n            {\n              \"test\": \"(!length(data('selected')) || indata('selected', 'value', datum.Kategori))\",\n              \"value\": 1\n            },\n            {\n              \"value\": 0\n            }\n          ]\n        }\n      }\n    }\n  ],\n  \"config\": {}\n}";
vegatest.app.core.a = JSON.parse(vegatest.app.core.json);
if((typeof vegatest !== 'undefined') && (typeof vegatest.app !== 'undefined') && (typeof vegatest.app.core !== 'undefined') && (typeof vegatest.app.core.state !== 'undefined')){
} else {
vegatest.app.core.state = reagent.core.atom.cljs$core$IFn$_invoke$arity$1((0));
}
vegatest.app.core.on_click_handler = (function vegatest$app$core$on_click_handler(e){
console.log(e);

return cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$3(vegatest.app.core.state,cljs.core._PLUS_,(6));
});
vegatest.app.core.komponent = (function vegatest$app$core$komponent(){
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"button","button",1456579943),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"on-click","on-click",1632826543),vegatest.app.core.on_click_handler], null),"Knap"], null);
});
vegatest.app.core.app_state = reagent.core.atom.cljs$core$IFn$_invoke$arity$1(new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"msg","msg",-1386103444),"Hello from app-state",new cljs.core.Keyword(null,"items","items",1031954938),new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"display","display",242065432),"Item 1"], null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"display","display",242065432),"Item 2"], null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"display","display",242065432),"Item 3"], null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"display","display",242065432),"Item 4"], null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"display","display",242065432),"Item 5"], null)], null),new cljs.core.Keyword(null,"active-item","active-item",-1265645988),cljs.core.PersistentArrayMap.EMPTY], null));
vegatest.app.core.items_list = (function vegatest$app$core$items_list(items,active_item){
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",-2030961996),"items-list"], null),(function (){var iter__4529__auto__ = (function vegatest$app$core$items_list_$_iter__44977(s__44978){
return (new cljs.core.LazySeq(null,(function (){
var s__44978__$1 = s__44978;
while(true){
var temp__5735__auto__ = cljs.core.seq(s__44978__$1);
if(temp__5735__auto__){
var s__44978__$2 = temp__5735__auto__;
if(cljs.core.chunked_seq_QMARK_(s__44978__$2)){
var c__4527__auto__ = cljs.core.chunk_first(s__44978__$2);
var size__4528__auto__ = cljs.core.count(c__4527__auto__);
var b__44980 = cljs.core.chunk_buffer(size__4528__auto__);
if((function (){var i__44979 = (0);
while(true){
if((i__44979 < size__4528__auto__)){
var item = cljs.core._nth(c__4527__auto__,i__44979);
cljs.core.chunk_append(b__44980,cljs.core.with_meta(new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",-2030961996),((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(active_item,item))?"item active":"item")], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p","p",151049309),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"on-click","on-click",1632826543),((function (i__44979,item,c__4527__auto__,size__4528__auto__,b__44980,s__44978__$2,temp__5735__auto__){
return (function (e){
return cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$4(vegatest.app.core.app_state,cljs.core.assoc_in,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"active-item","active-item",-1265645988)], null),item);
});})(i__44979,item,c__4527__auto__,size__4528__auto__,b__44980,s__44978__$2,temp__5735__auto__))
], null),new cljs.core.Keyword(null,"display","display",242065432).cljs$core$IFn$_invoke$arity$1(item)], null)], null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"key","key",-1516042587),new cljs.core.Keyword(null,"display","display",242065432).cljs$core$IFn$_invoke$arity$1(item)], null)));

var G__44981 = (i__44979 + (1));
i__44979 = G__44981;
continue;
} else {
return true;
}
break;
}
})()){
return cljs.core.chunk_cons(cljs.core.chunk(b__44980),vegatest$app$core$items_list_$_iter__44977(cljs.core.chunk_rest(s__44978__$2)));
} else {
return cljs.core.chunk_cons(cljs.core.chunk(b__44980),null);
}
} else {
var item = cljs.core.first(s__44978__$2);
return cljs.core.cons(cljs.core.with_meta(new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",-2030961996),((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(active_item,item))?"item active":"item")], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p","p",151049309),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"on-click","on-click",1632826543),((function (item,s__44978__$2,temp__5735__auto__){
return (function (e){
return cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$4(vegatest.app.core.app_state,cljs.core.assoc_in,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"active-item","active-item",-1265645988)], null),item);
});})(item,s__44978__$2,temp__5735__auto__))
], null),new cljs.core.Keyword(null,"display","display",242065432).cljs$core$IFn$_invoke$arity$1(item)], null)], null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"key","key",-1516042587),new cljs.core.Keyword(null,"display","display",242065432).cljs$core$IFn$_invoke$arity$1(item)], null)),vegatest$app$core$items_list_$_iter__44977(cljs.core.rest(s__44978__$2)));
}
} else {
return null;
}
break;
}
}),null,null));
});
return iter__4529__auto__(items);
})()], null);
});
vegatest.app.core.timeline_url = "https://raw.githubusercontent.com/SofieVonge/infrastrukturalisme/master/data/timeline/timeline.vg.json";
vegatest.app.core.alter_height = (function vegatest$app$core$alter_height(v){
return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"op","op",-1882987955),"replace",new cljs.core.Keyword(null,"path","path",-188191168),"/height",new cljs.core.Keyword(null,"value","value",305978217),v], null)], null);
});
if((typeof vegatest !== 'undefined') && (typeof vegatest.app !== 'undefined') && (typeof vegatest.app.core !== 'undefined') && (typeof vegatest.app.core.height !== 'undefined')){
} else {
vegatest.app.core.height = reagent.core.atom.cljs$core$IFn$_invoke$arity$1((200));
}
vegatest.app.core.form = (function vegatest$app$core$form(){
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"<>","<>",1280186386),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"input#hjd","input#hjd",653183783),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),(200)], null)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"button#knap","button#knap",-1901437717),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"on-click","on-click",1632826543),(function (e){
return cljs.core.reset_BANG_(vegatest.app.core.height,document.getElementById("hjd").value);
})], null),"Change height"], null)], null);
});
vegatest.app.core.spec = cljs.core.js__GT_clj.cljs$core$IFn$_invoke$arity$variadic(vegatest.app.core.a,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,"keywordize-keys","keywordize-keys",1310784252),true], 0));
vegatest.app.core.new_spec = cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(vegatest.app.core.spec,new cljs.core.Keyword(null,"height","height",1025178622),(500));
vegatest.app.core.app = (function vegatest$app$core$app(){
console.log("spec: ",vegatest.app.core.new_spec);

console.log(cljs.core.map_QMARK_(vegatest.app.core.new_spec));

return new cljs.core.PersistentVector(null, 8, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"<>","<>",1280186386),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"pre","pre",2118456869),cljs.core.deref(vegatest.app.core.state)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p","p",151049309),"Hej verden"], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [vegatest.app.core.items_list,new cljs.core.Keyword(null,"items","items",1031954938).cljs$core$IFn$_invoke$arity$1(cljs.core.deref(vegatest.app.core.app_state)),new cljs.core.Keyword(null,"active-item","active-item",-1265645988).cljs$core$IFn$_invoke$arity$1(cljs.core.deref(vegatest.app.core.app_state))], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"h1","h1",-1896887462),new cljs.core.Keyword(null,"msg","msg",-1386103444).cljs$core$IFn$_invoke$arity$1(cljs.core.deref(vegatest.app.core.app_state))], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [vegatest.app.core.form], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [oz.core.vega,vegatest.app.core.new_spec,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"mode","mode",654403691),"vega"], null)], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [vegatest.app.core.komponent], null)], null);
});
setTimeout((function (){
return cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$4(vegatest.app.core.app_state,cljs.core.assoc_in,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"msg","msg",-1386103444)], null),"new message");
}),(2000));
vegatest.app.core.root = document.getElementById("app");
vegatest.app.core.render = (function vegatest$app$core$render(){
return reagent.dom.render.cljs$core$IFn$_invoke$arity$2(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [vegatest.app.core.app], null),vegatest.app.core.root);
});
vegatest.app.core.init = (function vegatest$app$core$init(){
console.log("Hello world");

return vegatest.app.core.render();
});

//# sourceMappingURL=vegatest.app.core.js.map
